<!DOCTYPE html>
<html>
<body>

<h1>Logitech Circle2 redirected URL temp location</h1>
<p>Under construction waiting for API access -DL</p>
<script>
        var url = window.location.href;
        var code = url.match(new RegExp("code=" + "(.*)" + "&lang=en"))[1]
        console.log("Code is" + code)
       

        var payload = "grant_type=authorization_code&"+
                      "client_id=cd3b9c9d-6350-4747-9eb8-2596621d0333&"+
                      "client_secret=owvAhkGX0x8Og45F&"+
                      "redirect_uri=https://leacock.netlify.com/api/logi_circle&"
                      "code="+code;

        console.log("Sending POST to grab access token with payload: " + payload);


        var xhr = new XMLHttpRequest();
        xhr.open("POST", "https://accounts.logi.com/identity/oauth2/token", true);
        xhr.withCredentials = true;
        xhr.setRequestHeader('X-API-Key', 'DoUTyeLcWmz4gEwYlZ7D0rsDWW8');
        xhr.send(payload);

        xhr.onload = function() {
                console.log("Post Response: " + this.responseText)
                //var data = JSON.parse(this.responseText);
                //console.log(data);
        }

</script>

</body>
</html>